# $Id$
# Copyright 2004, 2005 Eric L. Smith <eric@brouhaha.com>

# Nonpareil is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License version 2 as
# published by the Free Software Foundation.  Note that I am not
# granting permission to redistribute or modify Nonpareil under the
# terms of any later version of the General Public License.

# Nonpareil is distributed in the hope that they will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program (in the file "COPYING"); if not, write to
# the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
# Boston, MA 02111, USA.

global
	title "80 Business Calculator"
	author "Eric Smith <eric@brouhaha.com>"
	hardware "Classic"
	model "80"
	rom "80.obj"
	listing "80.lst"
	image "80.png"
	color 0 67 33 119	  # background color, used when transparency is off
	transparency 128
end

background
	offset 12 7
	size 263 505
end

display
	offset 46 43
	size 192 35

	color 0 35 17 17   # background
	color 1 35 17 17   # unlit segments
	color 2 255 17 17  # lit segments

	digits 15
		size 12 11
		offset 8 10
	end

	character '0' segment 'a' 'b' 'c' 'd' 'e' 'f'         end
	character '1' segment     'b' 'c'                     end
        character '2' segment 'a' 'b'     'd' 'e'     'g'     end
	character '3' segment 'a' 'b' 'c' 'd'         'g'     end
	character '4' segment     'b' 'c'         'f' 'g'     end
	character '5' segment 'a'     'c' 'd'     'f' 'g'     end
	character '6' segment 'a'     'c' 'd' 'e' 'f' 'g'     end
	character '7' segment 'a' 'b' 'c'                     end
	character '8' segment 'a' 'b' 'c' 'd' 'e' 'f' 'g'     end
	character '9' segment 'a' 'b' 'c' 'd'     'f' 'g'     end
	character '.' segment                             'h' end
	character '-' segment                         'g'     end
	character ' ' segment                                 end

	segment 'a' line offset  0  0 size 6 1 end
	segment 'b' line offset  5  0 size 1 6 end
	segment 'c' line offset  5  5 size 1 6 end
	segment 'd' line offset  0 10 size 6 1 end
	segment 'e' line offset  0  5 size 1 6 end
	segment 'f' line offset  0  0 size 1 6 end
	segment 'g' line offset  0  5 size 6 1 end
	segment 'h' rect offset  2  8 size 2 2 end
end

button 11  type 0  size 26 20  offset  46 147  down 2 8  keycode 036  end
button 12  type 0  size 26 20  offset  86 147  down 2 8  keycode 034  end
button 13  type 0  size 26 20  offset 127 147  down 2 8  keycode 033  end
button 14  type 0  size 26 20  offset 169 147  down 2 8  keycode 032  end
button 15  type 0  size 26 20  offset 210 147  down 2 8  keycode 030  end

button 21  type 0  size 26 20  offset  46 190  down 2 8  keycode 056  end
button 22  type 0  size 26 20  offset  86 190  down 2 8  keycode 054  end
button 23  type 0  size 26 20  offset 127 190  down 2 8  keycode 053  end
button 24  type 0  size 26 20  offset 169 190  down 2 8  keycode 052  end
button 25  type 0  size 26 20  offset 210 190  down 2 8  keycode 050  end

button 31  type 0  size 26 20  offset  46 233  down 2 8  keycode 016  end
button 32  type 0  size 26 20  offset  86 233  down 2 8  keycode 014  end
button 33  type 0  size 26 20  offset 127 233  down 2 8  keycode 013  end
button 34  type 0  size 26 20  offset 169 233  down 2 8  keycode 012  end
button 35  type 0  size 26 20  offset 210 233  down 2 8  keycode 010  end

button 41  type 0  size 68 20  offset  44 276  down 2 8  keycode 076  end
button 42  type 0  size 26 20  offset 127 276  down 2 8  keycode 073  end
button 43  type 0  size 26 20  offset 169 276  down 2 8  keycode 072  end
button 44  type 0  size 26 20  offset 210 276  down 2 8  keycode 070  end

button 51  type 0  size 20 20  offset  44 318  down 2 8  keycode 066  end
button 52  type 0  size 32 20  offset  86 318  down 2 8  keycode 064  end
button 53  type 0  size 32 20  offset 145 318  down 2 8  keycode 063  end
button 54  type 0  size 32 20  offset 203 318  down 2 8  keycode 062  end

button 61  type 0  size 20 20  offset  44 361  down 2 8  keycode 026  end
button 62  type 0  size 32 20  offset  86 361  down 2 8  keycode 024  end
button 63  type 0  size 32 20  offset 145 361  down 2 8  keycode 023  end
button 64  type 0  size 32 20  offset 203 361  down 2 8  keycode 022  end

button 71  type 0  size 20 20  offset  44 405  down 2 8  keycode 006  end
button 72  type 0  size 32 20  offset  86 405  down 2 8  keycode 004  end
button 73  type 0  size 32 20  offset 145 405  down 2 8  keycode 003  end
button 74  type 0  size 32 20  offset 203 405  down 2 8  keycode 002  end

button 81  type 0  size 20 20  offset  44 446  down 2 8  keycode 046  end
button 82  type 0  size 32 20  offset  86 446  down 2 8  keycode 044  end
button 83  type 0  size 32 20  offset 145 446  down 2 8  keycode 043  end
button 84  type 0  size 32 20  offset 203 446  down 2 8  keycode 042  end

# main keyboard:
scancode "0"            map 0 82 end  # 0
scancode "1"            map 0 72 end  # 1
scancode "2"            map 0 73 end  # 2
scancode "3"            map 0 74 end  # 3
scancode "4"            map 0 62 end  # 4
scancode "5"            map 0 63 end  # 5
scancode "6"            map 0 64 end  # 6
scancode "7"            map 0 52 end  # 7
scancode "8"            map 0 53 end  # 8
scancode "9"            map 0 54 end  # 9
scancode "period"       map 0 83 end  # .
scancode "plus"         map 0 61 end  # +
scancode "minus"        map 0 51 end  # -
scancode "asterisk"     map 0 71 end  # *
scancode "slash"        map 0 81 end  # /
scancode "percent"      map 0 22 end  # %
scancode "Return"       map 0 41 end  # SAVE^
scancode "c"            map 0 43 end  # c - CHS

# suggested bindings (John R. Hogerhuis)
scancode "n"            map 0 11 end  # 'n' is n
scancode "i"            map 0 12 end  # 'i' is i
scancode "p"            map 0 13 end  # 'p' is PMT
scancode "bracketleft"  map 0 14 end  # '[' is PV (present-value)
scancode "bracketright" map 0 15 end  # ']' is FV (future-value)

# keypad:
scancode "KP_0"         map 0 82 end  # 0
scancode "KP_1"         map 0 72 end  # 1
scancode "KP_2"         map 0 73 end  # 2
scancode "KP_3"         map 0 74 end  # 3
scancode "KP_4"         map 0 62 end  # 4
scancode "KP_5"         map 0 63 end  # 5
scancode "KP_6"         map 0 64 end  # 6
scancode "KP_7"         map 0 52 end  # 7
scancode "KP_8"         map 0 53 end  # 8
scancode "KP_9"         map 0 54 end  # 9
scancode "KP_Decimal"   map 0 83 end  # .
scancode "KP_Separator" map 0 83 end  # ,
scancode "KP_Add"       map 0 61 end  # +
scancode "KP_Subtract"  map 0 51 end  # -
scancode "KP_Multiply"  map 0 71 end  # *
scancode "KP_Divide"    map 0 81 end  # /
scancode "KP_Enter"     map 0 41 end  # ENTER
