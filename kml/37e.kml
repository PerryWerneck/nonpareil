# $Id$
# Copyright 2004, 2005 Eric L. Smith <eric@brouhaha.com>

# Nonpareil is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License version 2 as
# published by the Free Software Foundation.  Note that I am not
# granting permission to redistribute or modify Nonpareil under the
# terms of any later version of the General Public License.

# Nonpareil is distributed in the hope that they will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program (in the file "COPYING"); if not, write to
# the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
# Boston, MA 02111, USA.

global
	title "37E Financial Calculator"
	author "Eric Smith <eric@brouhaha.com>"
	hardware "Spice"
	model "37e"
	rom "37e.obj"
	image "37e.png"
	color 0 87 127 152  # background color, used when transparency is off
	transparency 128
end

background
	offset 6 12
	size 260 503
end

display
	offset 26 87
	size 215 49

	color 0 35 17 17   # background
	color 1 35 17 17   # unlit segments
	color 2 255 17 17  # lit segments

	digits 12
		size 17 14
		offset 10 20
	end

	character 0x00 segment 'a' 'b' 'c' 'd' 'e' 'f'             end
	character 0x01 segment     'b' 'c'                         end
        character 0x02 segment 'a' 'b'     'd' 'e'     'g'         end
	character 0x03 segment 'a' 'b' 'c' 'd'         'g'         end
	character 0x04 segment     'b' 'c'         'f' 'g'         end
	character 0x05 segment 'a'     'c' 'd'     'f' 'g'         end
	character 0x06 segment 'a'     'c' 'd' 'e' 'f' 'g'         end
	character 0x07 segment 'a' 'b' 'c'                         end
	character 0x08 segment 'a' 'b' 'c' 'd' 'e' 'f' 'g'         end
	character 0x09 segment 'a' 'b' 'c' 'd'     'f' 'g'         end
	character 0x0a segment                 'e'     'g'         end # r
	character 0x0b segment     'b' 'c'     'e' 'f' 'g'         end # H
	character 0x0c segment         'c' 'd' 'e'     'g'         end # o
	character 0x0d segment 'a' 'b'         'e' 'f' 'g'         end # p
	character 0x0e segment 'a'         'd' 'e' 'f' 'g'         end # e
	character 0x0f segment                                     end # space
	character ' '  segment                                     end
	character '-'  segment                         'g'         end
	character '.'  segment                             'h'     end
	character ','  segment                             'h' 'i' end

	segment 'a' line offset  0  0 size 6 1 end
	segment 'b' line offset  5  0 size 1 6 end
	segment 'c' line offset  5  5 size 1 6 end
	segment 'd' line offset  0 10 size 6 1 end
	segment 'e' line offset  0  5 size 1 6 end
	segment 'f' line offset  0  0 size 1 6 end
	segment 'g' line offset  0  5 size 6 1 end
	segment 'h' rect offset  9 11 size 2 2 end
	segment 'i' rect offset  8 13 size 2 1 end
end

switch 0
  size 15 12
  default 1
  position 0  offset  72 149  end  # off
  position 1  offset  87 149  end  # on
end

switch 1
  size 15 12
  default 1
  position 0  offset 166 149          end  # program
  position 1  offset 181 149  flag 3  end  # run
end

button 11  type 0  size 30 25  offset  39 179  down 2 8  keycode 0064  end
button 12  type 0  size 30 25  offset  79 179  down 2 8  keycode 0063  end
button 13  type 0  size 30 25  offset 119 179  down 2 8  keycode 0062  end
button 14  type 0  size 30 25  offset 159 179  down 2 8  keycode 0061  end
button 15  type 0  size 30 25  offset 199 179  down 2 8  keycode 0060  end

button 21  type 0  size 30 25  offset  39 224  down 2 8  keycode 0224  end
button 22  type 0  size 30 25  offset  79 224  down 2 8  keycode 0223  end
button 23  type 0  size 30 25  offset 119 224  down 2 8  keycode 0222  end
button 24  type 0  size 30 25  offset 159 224  down 2 8  keycode 0221  end
button 25  type 0  size 30 25  offset 199 224  down 2 8  keycode 0220  end

button 31  type 0  size 70 25  offset  39 269  down 2 8  keycode 0163  end
button 32  type 0  size 30 25  offset 119 269  down 2 8  keycode 0162  end
button 33  type 0  size 30 25  offset 159 269  down 2 8  keycode 0161  end
button 34  type 0  size 30 25  offset 199 269  down 2 8  keycode 0160  end

button 41  type 0  size 30 25  offset  39 314  down 2 8  keycode 0243  end
button 42  type 0  size 34 25  offset  89 314  down 2 8  keycode 0242  end
button 43  type 0  size 34 25  offset 143 314  down 2 8  keycode 0241  end
button 44  type 0  size 34 25  offset 197 314  down 2 8  keycode 0240  end

button 51  type 0  size 30 25  offset  39 359  down 2 8  keycode 0143  end
button 52  type 0  size 34 25  offset  89 359  down 2 8  keycode 0142  end
button 53  type 0  size 34 25  offset 143 359  down 2 8  keycode 0141  end
button 54  type 0  size 34 25  offset 197 359  down 2 8  keycode 0140  end

button 61  type 0  size 30 25  offset  39 404  down 2 8  keycode 0323  end
button 62  type 0  size 34 25  offset  89 404  down 2 8  keycode 0322  end
button 63  type 0  size 34 25  offset 143 404  down 2 8  keycode 0321  end
button 64  type 0  size 34 25  offset 197 404  down 2 8  keycode 0320  end

button 71  type 0  size 30 25  offset  39 449  down 2 8  keycode 0103  end
button 72  type 0  size 34 25  offset  89 449  down 2 8  keycode 0102  end
button 73  type 0  size 34 25  offset 143 449  down 2 8  keycode 0101  end
button 74  type 0  size 34 25  offset 197 449  down 2 8  keycode 0100  end

# main keyboard:
scancode "0"            map 0 72 end  # 0
scancode "1"            map 0 62 end  # 1
scancode "2"            map 0 63 end  # 2
scancode "3'            map 0 64 end  # 3
scancode "4"            map 0 52 end  # 4
scancode "5"            map 0 53 end  # 5
scancode "6"            map 0 54 end  # 6
scancode "7"            map 0 42 end  # 7
scancode "8"            map 0 43 end  # 8
scancode "9"            map 0 44 end  # 9
scancode "period"       map 0 73 end  # .
scancode "plus"         map 0 51 end  # +
scancode "minus"        map 0 41 end  # -
scancode "asterisk"     map 0 61 end  # *
scancode "slash"        map 0 71 end  # /
scancode "Return"       map 0 31 end  # ENTER
scancode "c"            map 0 32 end  # c - CHS

# suggested bindings (John R. Hogerhuis)
scancode "n"            map 0 11 end  # 'n' is n
scancode "i"            map 0 12 end  # 'i' is i
scancode "bracketleft"  map 0 13 end  # '[' is PV (present-value)
scancode "p"            map 0 14 end  # 'p' is PMT
scancode "bracketright" map 0 15 end  # ']' is FV (future-value)

# keypad:
scancode "KP_0"         map 0 72 end  # 0
scancode "KP_1"         map 0 62 end  # 1
scancode "KP_2"         map 0 63 end  # 2
scancode "KP_3"         map 0 64 end  # 3
scancode "KP_4"         map 0 52 end  # 4
scancode "KP_5"         map 0 53 end  # 5
scancode "KP_6"         map 0 54 end  # 6
scancode "KP_7"         map 0 42 end  # 7
scancode "KP_8"         map 0 43 end  # 8
scancode "KP_9"         map 0 44 end  # 9
scancode "KP_Decimal"   map 0 73 end  # .
scancode "KP_Separator" map 0 73 end  # ,
scancode "KP_Add"       map 0 51 end  # +
scancode "KP_Subtract"  map 0 41 end  # -
scancode "KP_Multiply"  map 0 61 end  # *
scancode "KP_Divide"    map 0 71 end  # /
scancode "KP_Enter"     map 0 31 end  # ENTER
