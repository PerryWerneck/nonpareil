TODO list for Nonpareil
Copyright 1995, 2003, 2004, 2005 Eric L. Smith <eric@brouhaha.com>
$Id$


Build process:

  Create a proper SCons builder for uasm.

  Create an RPM .spec file.


User interface:

  Add ability to read kml, image, microcode from zip file.
      GSF: http://www.gnome.org/projects/libgsf/
          examples in CVS: http://cvs.gnome.org/viewcvs/libgsf/tests/
	  use a GdkPixbufLoader instead of gdk_pixbuf_new_from_file().
      On Windows, build ZIP into .EXE similar to a self-extractor?

  Display segments from image file rather than as line segments and
  rectangles.

  Transparency/shape: improve support for moving window: add KML
  syntax to specify keyboard rectangle, and use only region outside
  rectangle for dragging.

  Improve keyboard support:
      Release key when focus is lost.
      Ignore key release and hold key for a fixed (configurable?) number of
          simulation cycles?

  Implement menu commands:
      File - Open, Save, save As
      Edit - Copy, Paste

  Make button highlighting look better.

  Make slide switches look better.

  Add help.

  Create an icon.

  Calculator model selection at runtime.

  Create a fancier About box.  Use GtkAboutDialog, which allows for
  clickable website URLs and email addresses, license window, etc.

  Extract comments from image file and include in About box.  PNG
  comment keywords to use:
      Author
      Title
      Description
      Copyright
      Disclaimer
      Warning
      URL (unofficial)
  Unfortunately getting the comments will require the file to be
  read twice, once by gdk_pixbuf_new_from_file(), and once by direct
  calls to libpng, libjpeg, etc.


Debugger:

  Add disassembler for Classic processors.

  Add reflection API for use by debugger (both GUI and command line).

  Add register window.

  Add debugger commands.  Pass dbt_t as arg to commands.

  Create new VTE patch based on feedback from Nalin.

  Change Tcl standard I/O streams to use pty file descriptor.


Internals:

  Change nut pt (pointer selection) from pointer to boolean.  Replace
  references to *pt to (pt ? q : p).

  Add method to get architecture-specific word size (WSIZE).

  Only send display update message to GUI thread if display has changed.

  Add code to remove async queue g_source when simulator thread exits.

  Implement async queue based functions needed by debugger.

  Move more of the simulator initialization into the simulator thread.

  Load ROM using CMD_WRITE_ROM.

  Split proc.c into separate GUI thread and simulator thread portions.

  Use io_count to improve display update timing (already done in nut, add to
  classic and woodstock).

  Split ALU functions into separate source file.

  Replace globals in csim.c with structure.  Allow for multiple instances.

  Clean up memory usage of symbols in CASM

  Implement symbol cross-reference in CASM

  It would be nice to use a pure parser for KML, pass in the kml_t
  pointer as input, and return it from read_kml_file().  But Flex
  doesn't yet seem to have support for the Bison pure_parser option.
  There exist patches, but I don't want to make people use those.
  Better to wait for a production release of Flex.


Better model support:

  Scan images at uniform scale and without JPEG compression.

  Dump actual ROMs:
      Classic:    HP-45, HP-55, HP-65, HP-70, HP-80
      Classic/printing:  HP-46, HP-81, HP 9805A
      Woodstock:  HP-22, HP-27, HP-29C, HP-67
      Topcat:     HP-91, HP-92, HP-95C, HP-97
      Sting:      HP-10, HP-19C
      Spice:      HP-31E, HP-33E
      Cricket:    HP-01

  Compare actual HP-45 and HP-55 ROMs to CASM output.

  Add Woodstock microinstructions for card reader

  Add Woodstock microinstructions for printer

  Add HP-65 microinstructions for program memory access.

